<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Регистрация | ORBITYX</title>
    <style>
        :root {--bg-color: #f0f0f0; --text-color: #000000; --form-bg: #ffffff; --button-bg: #001c3b; --button-text: #ffffff;}
        .dark {--bg-color: #0f1019; --text-color: #f0f0f0; --form-bg: #1b1b22; --button-bg: #73946B; --button-text: #000000;}

        body {font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif; background-color: var(--bg-color); color: var(--text-color); padding: 20px; transition: background-color 0.3s, color 0.3s;}

        .form-container {background: var(--form-bg); max-width: 400px; margin: auto; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);}

        .form-control {width: 100%; padding: 10px; margin: 8px 0; box-sizing: border-box; border-radius: 50px; border: 1px solid #ccc;}

        button {width: 100%; padding: 10px; background-color: var(--button-bg);color: var(--button-text); border: none; cursor: pointer; border-radius: 50px;}

        button:hover {opacity: 0.9;}

        .flash-messages p {color: red; margin: 5px 0;}

        .theme-switch {position: absolute; top: 20px; right: 20px; display: inline-block; width: 50px; height: 28px;}

        .theme-switch input {opacity: 0; width: 0; height: 0;}

        .slider {position: absolute;cursor: pointer;top: 0; left: 0; right: 0; bottom: 0;background-color: #ccc;transition: 0.4s;border-radius: 34px;}

        .slider:before {position: absolute; content: ""; height: 20px; width: 20px;left: 4px;bottom: 4px;background-color: white;transition: 0.4s;border-radius: 50%;}

        input:checked + .slider {background-color: #2196F3;}

        input:checked + .slider:before {transform: translateX(22px);}
    </style>
</head>
<body>

<!-- Переключатель темы -->
<label class="theme-switch">
    <input type="checkbox" id="theme-toggle">
    <span class="slider"></span>
</label>

<div class="form-container">
    <h2>Регистрация</h2>
    <form method="POST">
        {{ form.hidden_tag() }}

        <label>{{ form.username.label }}</label>
        {{ form.username(class_="form-control") }}

        <label>{{ form.email.label }}</label>
        {{ form.email(class_="form-control") }}

        <label>{{ form.phone.label }}</label>
        {{ form.phone(class_="form-control") }}

        <label>{{ form.password.label }}</label>
        {{ form.password(class_="form-control") }}

        <label>{{ form.confirm.label }}</label>
        {{ form.confirm(class_="form-control") }}

        <button type="submit">Зарегистрироваться</button>
    </form>

    {% with messages = get_flashed_messages(category_filter=['error']) %}
    {% if messages %}
    <div class="flash-messages">
        {% for message in messages %}
        <p>{{ message }}</p>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <p>Уже есть аккаунт? <a href="{{ url_for('main.login') }}" class="login-link">Войти</a></p>
</div>

<!-- JS переключения темы -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const toggle = document.getElementById('theme-toggle');
        const html = document.documentElement;

        const saved = localStorage.getItem('theme');
        if (saved === 'dark') {html.classList.add('dark');toggle.checked = true;}

        toggle.addEventListener('change', () => {
            html.classList.toggle('dark');
            localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light');
        });
    });
</script>

</body>
</html>
